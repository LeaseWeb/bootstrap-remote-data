var $ = jQuery;
/**
 *
 * Bootstrap remote data tabs plugin
 *
 * Author: Stephen Hoogendijk (TheCodeAssassin)
 *
 * Licensed under the GPLV2 license.
 *
 * @returns {{hasLoadingMask: boolean, load: Function, _executeRemoteCall: Function}}
 * @constructor
*/
var hasLoadingMask=jQuery().mask?true:false,bootstrapVersion2=jQuery().typeahead?true:false;var showEvent=bootstrapVersion2?"show":"show.bs.tab";var RemoteTabs=function(){var e={hasLoadingMask:false,load:function(e,t){var n=this;n.hasLoadingMask=!!t;$("[data-toggle=tab]").each(function(t,r){var i=$(r),s,o,u,a,f,l;if(i.is("[data-tab-url]")){f=i.attr("data-tab-url");s=$(i.attr("href"));o=i.attr("data-parent");u=i.attr("data-tab-json")||[];a=i.attr("data-tab-callback")||null;l=i.attr("data-tab-delay")||null;if(u.length>0){try{u=$.parseJSON(u)}catch(c){console.log("Invalid json passed to data-tab-json");console.log(c)}}i.on(e,function(e){if(!i.hasClass("loaded")||i.is("[data-tab-always-refresh]")){if(n.hasLoadingMask){s.mask("Loading...")}if(l){clearTimeout(window.timer);window.timer=setTimeout(function(){n._executeRemoteCall(f,u,a,i,s)},l)}else{n._executeRemoteCall(f,u,a,i,s)}}})}})},_executeRemoteCall:function(e,t,n,r,i,s){var o=this;$.ajax({url:e,data:t||[],success:function(e){if(o.hasLoadingMask){i.unmask()}if(e){if(s){$(s+" > .remoteData").empty()}i.html(e);if(typeof window[n]=="function"){window[n].call(null,e,r,i,t)}if(!r.hasClass("loaded")){r.addClass("loaded")}}},fail:function(e){if(o.hasLoadingMask){i.unmask()}}})}};e.load(showEvent,hasLoadingMask);return e};var remoteTabsPluginLoaded=new RemoteTabs;
